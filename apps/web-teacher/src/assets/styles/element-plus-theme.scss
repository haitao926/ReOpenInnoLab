@use './variables';

// 开源浦育 ReOpenInnoLab - Element Plus 主题定制
// 基于 Design Token 覆盖 Element Plus 默认样式

// Element Plus 主题变量覆盖
:root {
  // 主色调
  --el-color-primary: var(--edu-primary-500);
  --el-color-primary-light-3: var(--edu-primary-300);
  --el-color-primary-light-5: var(--edu-primary-400);
  --el-color-primary-light-7: var(--edu-primary-200);
  --el-color-primary-light-8: var(--edu-primary-100);
  --el-color-primary-light-9: var(--edu-primary-50);
  --el-color-primary-dark-2: var(--edu-primary-600);

  // 成功色
  --el-color-success: var(--edu-success-500);
  --el-color-success-light-3: var(--edu-success-300);
  --el-color-success-light-5: var(--edu-success-400);
  --el-color-success-light-7: var(--edu-success-200);
  --el-color-success-light-8: var(--edu-success-100);
  --el-color-success-light-9: var(--edu-success-50);
  --el-color-success-dark-2: var(--edu-success-600);

  // 警告色
  --el-color-warning: var(--edu-warning-500);
  --el-color-warning-light-3: var(--edu-warning-300);
  --el-color-warning-light-5: var(--edu-warning-400);
  --el-color-warning-light-7: var(--edu-warning-200);
  --el-color-warning-light-8: var(--edu-warning-100);
  --el-color-warning-light-9: var(--edu-warning-50);
  --el-color-warning-dark-2: var(--edu-warning-600);

  // 错误色
  --el-color-error: var(--edu-danger-500);
  --el-color-error-light-3: var(--edu-danger-300);
  --el-color-error-light-5: var(--edu-danger-400);
  --el-color-error-light-7: var(--edu-danger-200);
  --el-color-error-light-8: var(--edu-danger-100);
  --el-color-error-light-9: var(--edu-danger-50);
  --el-color-error-dark-2: var(--edu-danger-600);

  // 信息色
  --el-color-info: var(--edu-primary-400);
  --el-color-info-light-3: var(--edu-primary-300);
  --el-color-info-light-5: var(--edu-primary-400);
  --el-color-info-light-7: var(--edu-primary-200);
  --el-color-info-light-8: var(--edu-primary-100);
  --el-color-info-light-9: var(--edu-primary-50);
  --el-color-info-dark-2: var(--edu-primary-600);

  // 中性色
  --el-color-white: var(--edu-text-white);
  --el-color-black: #000000;
  --el-color-gray: #909399;
  --el-gray-1: #f7f8fa;
  --el-gray-2: #f2f3f5;
  --el-gray-3: #e5e7eb;
  --el-gray-4: #d9d9d9;
  --el-gray-5: #c8c9cc;
  --el-gray-6: #909399;
  --el-gray-7: #606266;
  --el-gray-8: #3a3a3c;
  --el-gray-9: #262729;

  // 边框圆角
  --el-border-radius-base: var(--edu-radius-base);
  --el-border-radius-small: var(--edu-radius-sm);
  --el-border-radius-round: var(--edu-radius-full);

  // 字体
  --el-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  --el-font-size-base: var(--edu-font-size-sm);
  --el-font-size-small: var(--edu-font-size-xs);
  --el-font-size-large: var(--edu-font-size-base);
  --el-font-size-extra-large: var(--edu-font-size-lg);
  --el-font-weight-primary: var(--edu-font-weight-medium);

  // 阴影
  --el-box-shadow: var(--edu-shadow-base);
  --el-box-shadow-light: var(--edu-shadow-sm);
  --el-box-shadow-dark: var(--edu-shadow-lg);

  // 动效
  --el-transition-duration: var(--edu-duration-base);
  --el-transition-duration-fast: var(--edu-duration-fast);

  // 布局
  --el-component-size-large: 40px;
  --el-component-size: 32px;
  --el-component-size-small: 24px;
}

// 深色模式变量覆盖
[data-theme="dark"] {
  // 中性色深色模式
  --el-color-gray: #909399;
  --el-gray-1: #262729;
  --el-gray-2: #3a3a3c;
  --el-gray-3: #606266;
  --el-gray-4: #c8c9cc;
  --el-gray-5: #d9d9d9;
  --el-gray-6: #e5e7eb;
  --el-gray-7: #f2f3f5;
  --el-gray-8: #f7f8fa;
  --el-gray-9: #fff;

  // 背景色
  --el-bg-color: var(--edu-bg-primary);
  --el-bg-color-page: var(--edu-bg-secondary);
  --el-bg-color-overlay: var(--edu-bg-tertiary);

  // 边框色
  --el-border-color: var(--edu-border-medium);
  --el-border-color-light: var(--edu-border-light);
  --el-border-color-lighter: var(--edu-border-light);
  --el-border-color-extra-light: var(--edu-bg-tertiary);
  --el-border-color-dark: var(--edu-border-dark);
  --el-border-color-darker: var(--edu-text-secondary);

  // 填充色
  --el-fill-color: var(--edu-bg-tertiary);
  --el-fill-color-light: var(--edu-border-medium);
  --el-fill-color-lighter: var(--edu-bg-tertiary);
  --el-fill-color-extra-light: var(--edu-bg-secondary);
  --el-fill-color-dark: var(--edu-bg-secondary);
  --el-fill-color-darker: var(--edu-bg-primary);
  --el-fill-color-blank: transparent;

  // 文字色
  --el-text-color-primary: var(--edu-text-primary);
  --el-text-color-regular: var(--edu-text-secondary);
  --el-text-color-secondary: var(--edu-text-tertiary);
  --el-text-color-placeholder: var(--edu-text-disabled);
  --el-text-color-disabled: var(--edu-text-disabled);
}

// 组件样式定制

// 按钮定制
.el-button {
  border-radius: var(--edu-radius-base);
  font-weight: var(--edu-font-weight-medium);
  transition: all 0.3s var(--edu-easing-in-out);

  &:hover {
    box-shadow: var(--edu-shadow-lg);
    transform: translateY(-1px);
  }

  &:active {
    transform: translateY(0);
  }

  &.el-button--primary {
    border: none;
    background: linear-gradient(135deg, var(--edu-primary-500) 0%, var(--edu-primary-400) 100%);
  }

  &.el-button--success {
    border: none;
    background: linear-gradient(135deg, var(--edu-success-500) 0%, var(--edu-success-400) 100%);
  }

  &.el-button--warning {
    border: none;
    background: linear-gradient(135deg, var(--edu-warning-500) 0%, var(--edu-warning-400) 100%);
  }

  &.el-button--danger {
    border: none;
    background: linear-gradient(135deg, var(--edu-danger-500) 0%, var(--edu-danger-400) 100%);
  }
}

// 卡片定制
.el-card {
  border: 1px solid var(--edu-border-light);
  border-radius: var(--edu-radius-lg);
  box-shadow: var(--edu-shadow-sm);
  transition: all 0.3s var(--edu-easing-in-out);

  &:hover {
    box-shadow: var(--edu-shadow-md);
    transform: translateY(-2px);
  }

  .el-card__header {
    border-bottom: 1px solid var(--edu-border-light);
    background: var(--edu-bg-secondary);
    font-weight: var(--edu-font-weight-semibold);
  }

  [data-theme="dark"] & {
    background: var(--edu-bg-primary);
    border-color: var(--edu-border-medium);

    .el-card__header {
      background: var(--edu-bg-secondary);
      border-color: var(--edu-border-light);
    }
  }
}

// 输入框定制
.el-input {
  .el-input__wrapper {
    border-radius: var(--edu-radius-base);
    box-shadow: none;
    transition: all 0.3s var(--edu-easing-in-out);

    &:hover {
      border-color: var(--edu-primary-400);
    }

    &.is-focus {
      border-color: var(--edu-primary-500);
      box-shadow: 0 0 0 2px rgb(59 130 246 / 20%);
    }
  }
}

// 选择器定制
.el-select {
  .el-select__wrapper {
    border-radius: var(--edu-radius-base);
    transition: all 0.3s var(--edu-easing-in-out);

    &:hover {
      border-color: var(--edu-primary-400);
    }

    &.is-focus {
      border-color: var(--edu-primary-500);
      box-shadow: 0 0 0 2px rgb(59 130 246 / 20%);
    }
  }
}

// 表格定制
.el-table {
  border-radius: var(--edu-radius-lg);
  overflow: hidden;

  .el-table__header-wrapper {
    background: var(--edu-bg-secondary);
  }

  .el-table__header {
    th {
      border-bottom: 1px solid var(--edu-border-light);
      background: var(--edu-bg-secondary);
      color: var(--edu-text-primary);
      font-weight: var(--edu-font-weight-semibold);
    }
  }

  .el-table__body {
    tr {
      &:hover {
        background: var(--edu-primary-50);
      }
    }
  }

  [data-theme="dark"] & {
    .el-table__header-wrapper {
      background: var(--edu-bg-secondary);
    }

    .el-table__header {
      th {
        background: var(--edu-bg-secondary);
        color: var(--edu-text-primary);
        border-color: var(--edu-border-light);
      }
    }

    .el-table__body {
      tr {
        &:hover {
          background: var(--edu-bg-tertiary);
        }
      }
    }
  }
}

// 分页定制
.el-pagination {
  .el-pager li {
    margin: 0 2px;
    border-radius: var(--edu-radius-sm);
    transition: all 0.3s var(--edu-easing-in-out);

    &:hover {
      transform: translateY(-1px);
    }

    &.is-active {
      background: linear-gradient(135deg, var(--edu-primary-500) 0%, var(--edu-primary-400) 100%);
      color: white;
    }
  }

  .btn-prev,
  .btn-next {
    border-radius: var(--edu-radius-sm);
    transition: all 0.3s var(--edu-easing-in-out);

    &:hover {
      transform: translateY(-1px);
    }
  }
}

// 标签页定制
.el-tabs {
  .el-tabs__nav-wrap::after {
    height: 1px;
    background: var(--edu-border-light);
  }

  .el-tabs__item {
    font-weight: var(--edu-font-weight-medium);
    transition: all 0.3s var(--edu-easing-in-out);

    &:hover {
      color: var(--edu-primary-500);
    }

    &.is-active {
      color: var(--edu-primary-500);
      font-weight: var(--edu-font-weight-semibold);
    }
  }

  .el-tabs__active-bar {
    height: 3px;
    border-radius: 3px;
    background: linear-gradient(90deg, var(--edu-primary-500) 0%, var(--edu-primary-400) 100%);
  }
}

// 消息提示定制 - 使用高优先级选择器确保样式生效
.el-message,
body .el-message {
  border: none;
  border-radius: var(--edu-radius-lg);
  box-shadow: var(--edu-shadow-lg);
  backdrop-filter: blur(8px);

  &.el-message--success {
    background: linear-gradient(135deg, var(--edu-success-100) 0%, var(--edu-success-200) 100%);
    color: var(--edu-success-800);
    border: 1px solid var(--edu-success-300);

    .el-message__content {
      color: var(--edu-success-800);
      font-weight: 500;
    }

    .el-message__icon {
      color: var(--edu-success-600);
    }
  }

  &.el-message--warning {
    background: linear-gradient(135deg, var(--edu-warning-100) 0%, var(--edu-warning-200) 100%);
    color: var(--edu-warning-800);
    border: 1px solid var(--edu-warning-300);

    .el-message__content {
      color: var(--edu-warning-800);
      font-weight: 500;
    }

    .el-message__icon {
      color: var(--edu-warning-600);
    }
  }

  &.el-message--error {
    background: linear-gradient(135deg, var(--edu-danger-100) 0%, var(--edu-danger-200) 100%);
    color: var(--edu-danger-800);
    border: 1px solid var(--edu-danger-300);

    .el-message__content {
      color: var(--edu-danger-800);
      font-weight: 500;
    }

    .el-message__icon {
      color: var(--edu-danger-600);
    }
  }

  &.el-message--info {
    background: linear-gradient(135deg, var(--edu-primary-100) 0%, var(--edu-primary-200) 100%);
    color: var(--edu-primary-800);
    border: 1px solid var(--edu-primary-300);

    .el-message__content {
      color: var(--edu-primary-800);
      font-weight: 500;
    }

    .el-message__icon {
      color: var(--edu-primary-600);
    }
  }
}

// 深色模式消息提示优化
[data-theme="dark"] {
  .el-message {
    &.el-message--success {
      background: linear-gradient(135deg, rgba(34, 197, 94, 0.15) 0%, rgba(34, 197, 94, 0.25) 100%);
      color: #86efac;
      border: 1px solid rgba(34, 197, 94, 0.4);

      .el-message__content {
        color: #86efac;
      }

      .el-message__icon {
        color: #4ade80;
      }
    }

    &.el-message--warning {
      background: linear-gradient(135deg, rgba(245, 158, 11, 0.15) 0%, rgba(245, 158, 11, 0.25) 100%);
      color: #fcd34d;
      border: 1px solid rgba(245, 158, 11, 0.4);

      .el-message__content {
        color: #fcd34d;
      }

      .el-message__icon {
        color: #fbbf24;
      }
    }

    &.el-message--error {
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.15) 0%, rgba(239, 68, 68, 0.25) 100%);
      color: #fca5a5;
      border: 1px solid rgba(239, 68, 68, 0.4);

      .el-message__content {
        color: #fca5a5;
      }

      .el-message__icon {
        color: #f87171;
      }
    }

    &.el-message--info {
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.25) 100%);
      color: #93c5fd;
      border: 1px solid rgba(59, 130, 246, 0.4);

      .el-message__content {
        color: #93c5fd;
      }

      .el-message__icon {
        color: #60a5fa;
      }
    }
  }
}

// 通知定制 - 使用柔和的颜色和清晰的文字对比
.el-notification {
  border: none;
  border-radius: var(--edu-radius-lg);
  box-shadow: var(--edu-shadow-xl);
  overflow: hidden;
  backdrop-filter: blur(12px);
  background: rgba(255, 255, 255, 0.95);
  border: 1px solid rgba(209, 213, 219, 0.5);

  .el-notification__title {
    font-weight: var(--edu-font-weight-semibold);
    color: #1f2937;
  }

  .el-notification__content {
    color: #4b5563;
    line-height: 1.5;
  }

  &.el-notification--success {
    border-left: 4px solid #22c55e;
    background: rgba(240, 253, 244, 0.95);

    .el-notification__title {
      color: #166534;
    }
  }

  &.el-notification--warning {
    border-left: 4px solid #f59e0b;
    background: rgba(255, 251, 235, 0.95);

    .el-notification__title {
      color: #92400e;
    }
  }

  &.el-notification--error {
    border-left: 4px solid #ef4444;
    background: rgba(254, 242, 242, 0.95);

    .el-notification__title {
      color: #991b1b;
    }
  }

  &.el-notification--info {
    border-left: 4px solid #3b82f6;
    background: rgba(239, 246, 255, 0.95);

    .el-notification__title {
      color: #1e40af;
    }
  }

  [data-theme="dark"] & {
    background: rgba(17, 24, 39, 0.95);
    border: 1px solid rgba(75, 85, 99, 0.5);

    .el-notification__title {
      color: #f9fafb;
    }

    .el-notification__content {
      color: #d1d5db;
    }

    &.el-notification--success {
      background: rgba(34, 197, 94, 0.1);
      border-left-color: #22c55e;

      .el-notification__title {
        color: #86efac;
      }
    }

    &.el-notification--warning {
      background: rgba(245, 158, 11, 0.1);
      border-left-color: #f59e0b;

      .el-notification__title {
        color: #fcd34d;
      }
    }

    &.el-notification--error {
      background: rgba(239, 68, 68, 0.1);
      border-left-color: #ef4444;

      .el-notification__title {
        color: #fca5a5;
      }
    }

    &.el-notification--info {
      background: rgba(59, 130, 246, 0.1);
      border-left-color: #3b82f6;

      .el-notification__title {
        color: #93c5fd;
      }
    }
  }
}

// 对话框定制
.el-dialog {
  border-radius: var(--edu-radius-lg);
  box-shadow: var(--edu-shadow-xl);
  overflow: hidden;
  backdrop-filter: blur(12px);

  .el-dialog__header {
    padding: 20px 24px 16px;
    border-bottom: 1px solid var(--edu-border-light);
    background: var(--edu-bg-primary);

    .el-dialog__title {
      font-size: var(--edu-font-size-lg);
      font-weight: var(--edu-font-weight-semibold);
      color: var(--edu-text-primary);
    }
  }

  .el-dialog__body {
    padding: 24px;
    color: var(--edu-text-primary);
    font-size: var(--edu-font-size-sm);
    line-height: 1.6;
    background: var(--edu-bg-primary);
  }

  .el-dialog__footer {
    padding: 16px 24px 20px;
    border-top: 1px solid var(--edu-border-light);
    background: var(--edu-bg-primary);
  }

  [data-theme="dark"] & {
    background: var(--edu-bg-primary);
    border: 1px solid var(--edu-border-medium);

    .el-dialog__header {
      background: var(--edu-bg-secondary);
      border-color: var(--edu-border-medium);

      .el-dialog__title {
        color: var(--edu-text-primary);
      }
    }

    .el-dialog__body {
      color: var(--edu-text-primary);
      background: var(--edu-bg-primary);
    }

    .el-dialog__footer {
      border-color: var(--edu-border-medium);
      background: var(--edu-bg-primary);
    }
  }
}

// 抽屉定制
.el-drawer {
  .el-drawer__header {
    padding: 20px 24px 16px;
    border-bottom: 1px solid var(--edu-border-light);
    background: var(--edu-bg-secondary);

    .el-drawer__title {
      font-size: var(--edu-font-size-xl);
      font-weight: var(--edu-font-weight-semibold);
    }
  }

  [data-theme="dark"] & {
    background: var(--edu-bg-primary);

    .el-drawer__header {
      background: var(--edu-bg-secondary);
      border-color: var(--edu-border-light);
    }
  }
}

// 加载中定制
.el-loading-mask {
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(4px);

  [data-theme="dark"] & {
    background: rgba(17, 24, 39, 0.85);
  }

  .el-loading-spinner {
    .circular {
      animation: loading-rotate 1s linear infinite;
      stroke: var(--edu-primary-500);
    }

    .el-loading-text {
      color: var(--edu-text-primary);
      font-weight: 500;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    }
  }
}

@keyframes loading-rotate {
  100% {
    transform: rotate(360deg);
  }
}

// 遮罩层样式
.el-overlay {
  background-color: rgba(0, 0, 0, 0.45) !important;
  backdrop-filter: blur(4px);
}

[data-theme="dark"] {
  .el-overlay {
    background-color: rgba(0, 0, 0, 0.7) !important;
  }
}

// 响应式适配
@media (width <= 768px) {
  .el-dialog {
    width: 90% !important;
    margin: 5vh auto !important;
  }

  .el-dialog__header,
  .el-dialog__body,
  .el-dialog__footer {
    padding-right: 16px;
    padding-left: 16px;
  }

  .el-drawer {
    width: 85% !important;
  }
}