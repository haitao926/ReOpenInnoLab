 # ReOpenInnoLab AI教学平台需求说明

**基于真实代码分析的需求文档 (2025-11-09更新)**

## 项目愿景

构建面向中小学学校场景下的AI教学平台，以课程为核心，AI赋能教学全流程，实现"创建→分配→播放→同步→数据"完整闭环。

## 核心功能模块

### 🎯 课程管理 (Course Management)
**状态**: ✅ 基础实现，需完善
- **课程创建**: 定义课程文件格式(.acl)，包含课程信息、章节结构、内容设计
- **课程流程**: 课程导入、知识讲授、活动（实验、交互体验）
- **AI赋能**: AI辅助课程草拟、内容生成、教学建议

### 🏫 班级管理 (Classroom Management)
**状态**: ✅ 完整实现 (classroom-service)
- **班级生命周期**: 创建、学生管理、课程分配
- **实时课堂**: 开始上课、学生参与、状态监控
- **成员管理**: 学生导入、分组、权限控制

### 🧪 实验管理 (Experiment Management)
**状态**: 📋 需要实现
- **Jupyter支持**: Notebook上传、AI创建、文件管理
- **穿件实验架构**:
  - 教师端: 静态预览、代码高亮、公式渲染、批注锚点
  - 学生端: 本地算力执行、虚拟实验室运行
  - 预览与执行隔离: nbconvert渲染，教师批注，学生运行
  - 文件互通: 统一存储、版本管理、资源引用

### 🎨 交互体验管理 (Interactive Experience Management)
**状态**: ✅ 基础实现
- **HTML体验**: 教师上传HTML文件，支持预览
- **交互设计**: 安全检测、多设备预览、埋点配置

### 📝 作业管理 (Assignment Management)
**状态**: ⚠️ 需要从零实现
- **作业创建**: 题库、AI出题、多种题型支持
- **智能批改**: AI辅助批改、评分标准、个性化反馈
- **学习分析**: 知识点掌握度、学习干预建议

## 技术架构需求

### 📋 数据持久化要求 (严格遵循项目原则)
- ✅ **禁止使用Mock**: 所有数据必须来自真实API
- ✅ **PostgreSQL集成**: 已完成classroom-service数据持久化
- 📋 **课程服务**: 需要实现course-service数据层
- 📋 **作业服务**: 需要实现assignment-service数据层

### 🔌 实时通信要求
- ✅ **WebSocket网关**: 已完成classroom-service WebSocket支持
- ✅ **实时同步**: 教师→学生端状态同步
- 📋 **学生端**: 需要实现RealtimeLessonView和WebSocket客户端

### 🎨 UI/UX要求
- ✅ **现代化设计**: 高级、优雅、现代化的用户界面
- ✅ **组件复用**: 强制使用packages/ui-kit组件
- ✅ **一致性**: 统一的设计系统和交互规范

## 核心业务流程

### 🔄 教师端完整流程
1. **课程创建** → 2. **班级分配** → 3. **课程播放** → 4. **实时教学** → 5. **数据收集**

#### 3. 课程播放 (Presenter Mode)
**状态**: ✅ 630行完整实现，需数据连接
- **全屏播放界面**: 已实现，需连接真实数据
- **环节控制**: 课程引入、新知讲解、体验理解、实验活动、作业测试
- **实时批注**: 批注工具、激光笔、AI建议
- **学生监控**: 实时状态、参与度、互动数据

#### 4. 实时教学
**状态**: ✅ WebSocket基础设施完成
- **环节切换**: 实时同步到学生端
- **状态管理**: 开始、暂停、结束课程
- **互动功能**: 实时问答、问题聚类、节奏提示

### 📱 学生端参与流程
**状态**: ⚠️ 需要从零实现
- **课堂加入**: 通过班级代码加入课程
- **实时同步**: 接收教师端状态变化
- **环节参与**: 跟随教学进度参与各环节
- **交互提交**: 实时提交学习数据和作业

## 技术规格要求

### 前端技术栈
- ✅ **Vue 3 + TypeScript**: 已配置
- ✅ **Element Plus**: 已深度定制
- ✅ **Pinia**: 状态管理
- ✅ **Vite**: 构建工具

### 后端技术栈
- ✅ **NestJS + TypeScript**: classroom-service已实现
- ✅ **PostgreSQL**: 数据持久化
- ✅ **Socket.IO**: 实时通信
- 📋 **Redis**: 缓存和会话管理

### 微服务架构
- ✅ **classroom-service**: 班级管理服务 (100%完成)
- 📋 **course-service**: 课程管理服务 (需要实现)
- 📋 **assignment-service**: 作业管理服务 (从零实现)
- ✅ **identity-service**: 身份认证服务 (基础完成)

## 已实现的核心功能 (2025-11-09)

### ✅ Classroom Service (班级服务)
- **完整API**: 创建、查询、更新、删除班级
- **成员管理**: 加入、离开、权限控制
- **WebSocket网关**: 实时通信、事件广播
- **数据持久化**: PostgreSQL + TypeORM集成

### ✅ Presenter Mode (教师播放模式)
- **630行完整实现**: 发现已存在的完整UI实现
- **数据连接**: 已建立真实API调用
- **WebSocket集成**: 实时通信基础设施
- **组件架构**: 模块化的组件设计

### ✅ 基础设施
- **项目结构**: 完整的monorepo架构
- **类型系统**: TypeScript类型安全
- **构建系统**: Turbo + Vite + NestJS

## 待实现的关键功能

### 🎯 高优先级 (立即开始)
1. **补全Presenter组件**:
   - `ExperienceSection.vue` (体验理解环节)
   - `ExperimentSection.vue` (实验活动环节)
   - `AssignmentSection.vue` (作业测试环节)
   - `ActivityFeed.vue` (实时动态)
   - `TeachingTips.vue` (教学提示)

2. **学生端实时同步**:
   - `RealtimeLessonView.vue` (实时课堂视图)
   - WebSocket客户端和状态管理
   - 学习进度跟踪和提交

3. **Course Service**:
   - 课程、课程实例、环节管理API
   - 数据库实体和迁移
   - 与Presenter集成

### 🔴 中优先级 (本月内)
1. **Assignment Service**: 从零实现作业管理系统
2. **实验服务**: Jupyter Notebook处理和预览
3. **测试基础设施**: 单元测试、集成测试、E2E测试

### 🟡 低优先级 (后续迭代)
1. **AI深度集成**: 智能内容生成、个性化推荐
2. **多设备支持**: iPad课堂、移动端适配
3. **课程市场**: 内容生态和共享机制

## 质量要求

### 性能指标
- **页面加载**: < 2秒
- **实时延迟**: < 500ms
- **并发支持**: 100+学生同时在线

### 可用性指标
- **系统稳定性**: > 99.5%
- **错误率**: < 0.1%
- **数据一致性**: 100%

### 用户体验指标
- **界面响应**: 流畅无卡顿
- **操作简洁**: 符合教师使用习惯
- **视觉体验**: 现代化、专业感

## 安全与合规要求

- **数据保护**: 学生数据隐私保护
- **访问控制**: 细粒度权限管理
- **内容安全**: 上传内容安全扫描
- **合规性**: 符合教育行业相关法规

---

**需求状态**: 已完成核心基础设施，进入功能完善阶段
**下一步**: 立即开始高优先级功能实现
**关键策略**: 基于现有基础快速完善，避免重复建设
